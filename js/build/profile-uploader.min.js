jQuery(document).ready(function(a){function b(b){b.preventDefault(),c=wp.media.frames.file_frame=wp.media({title:a(this).data("uploader_title"),button:{text:a(this).data("uploader_button_text")},multiple:!1}),c.on("select",function(){attachment=c.state().get("selection").first().toJSON(),a(b.currentTarget).prev().val(attachment.url),a("#image-preview").attr("src",attachment.url)}),c.open()}var c;a("#user-profile-upload").on("click",b),a("#widgets-right").on("click",".image-upload",b)});